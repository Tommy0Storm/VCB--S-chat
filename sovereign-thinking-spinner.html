<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sovereign Chat - Thinking Spinner</title>
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@300;500;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Quicksand', sans-serif;
            font-weight: 300;
            background: #FFFFFF;
            color: #000000;
            padding: 40px;
            line-height: 1.6;
        }

        h1 {
            font-family: 'Quicksand', sans-serif;
            font-weight: 700;
            text-transform: uppercase;
            margin-bottom: 30px;
            font-size: 24px;
            letter-spacing: 1px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .preview-section {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 30px;
            margin-bottom: 40px;
        }

        .preview-box {
            border: 1px solid #D3D3D3;
            padding: 20px;
            text-align: center;
        }

        .preview-box h2 {
            font-family: 'Quicksand', sans-serif;
            font-weight: 500;
            text-transform: uppercase;
            font-size: 14px;
            margin-bottom: 15px;
            letter-spacing: 0.5px;
        }

        .checkerboard {
            background-image: 
                linear-gradient(45deg, #F5F5F5 25%, transparent 25%), 
                linear-gradient(-45deg, #F5F5F5 25%, transparent 25%), 
                linear-gradient(45deg, transparent 75%, #F5F5F5 75%), 
                linear-gradient(-45deg, transparent 75%, #F5F5F5 75%);
            background-size: 20px 20px;
            background-position: 0 0, 0 10px, 10px -10px, -10px 0px;
            padding: 20px;
            display: inline-block;
        }

        .dark-bg {
            background: #1a1a1a;
            padding: 20px;
            display: inline-block;
        }

        button {
            background: #000000;
            color: #FFFFFF;
            border: none;
            padding: 12px 30px;
            font-family: 'Quicksand', sans-serif;
            font-weight: 500;
            text-transform: uppercase;
            cursor: pointer;
            font-size: 12px;
            letter-spacing: 1px;
            margin: 5px;
        }

        button:hover {
            background: #333333;
        }

        button.active {
            background: #4a4a4a;
        }

        .controls {
            margin-top: 30px;
            padding-top: 30px;
            border-top: 1px solid #D3D3D3;
        }

        .reference {
            margin-top: 30px;
            padding: 20px;
            border: 1px solid #D3D3D3;
            background: #F8F8F8;
            font-size: 12px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Sovereign Chat - Thinking Spinner</h1>
        
        <div class="preview-section">
            <div class="preview-box">
                <h2>Fast Speed (1.1s) - Transparent</h2>
                <div class="checkerboard">
                    <svg width="200" height="200" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg">
                        <g>
                            <animateTransform
                                attributeName="transform"
                                attributeType="XML"
                                type="rotate"
                                from="0 512 512"
                                to="360 512 512"
                                dur="1.1s"
                                repeatCount="indefinite"/>
                            <!-- Bubble 1 (orbits around center 512,512) -->
                            <circle cx="412" cy="412" r="100" fill="#4a4a4a"/>
                            <path d="M 357 485 L 337 525 L 377 505 Z" fill="#4a4a4a"/>
                            
                            <!-- Bubble 2 (orbits around center 512,512) -->
                            <circle cx="612" cy="612" r="100" fill="#6a6a6a"/>
                            <path d="M 667 539 L 687 499 L 647 519 Z" fill="#6a6a6a"/>
                        </g>
                    </svg>
                </div>
            </div>

            <div class="preview-box">
                <h2>Medium Speed (2.5s) - Transparent</h2>
                <div class="checkerboard">
                    <svg width="200" height="200" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg">
                        <g>
                            <animateTransform
                                attributeName="transform"
                                attributeType="XML"
                                type="rotate"
                                from="0 512 512"
                                to="360 512 512"
                                dur="2.5s"
                                repeatCount="indefinite"/>
                            <!-- Bubble 1 (orbits around center 512,512) -->
                            <circle cx="412" cy="412" r="100" fill="#4a4a4a"/>
                            <path d="M 357 485 L 337 525 L 377 505 Z" fill="#4a4a4a"/>
                            
                            <!-- Bubble 2 (orbits around center 512,512) -->
                            <circle cx="612" cy="612" r="100" fill="#6a6a6a"/>
                            <path d="M 667 539 L 687 499 L 647 519 Z" fill="#6a6a6a"/>
                        </g>
                    </svg>
                </div>
            </div>

            <div class="preview-box">
                <h2>Fast Speed (1.1s) - Dark Background</h2>
                <div class="dark-bg">
                    <svg width="200" height="200" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg">
                        <g>
                            <animateTransform
                                attributeName="transform"
                                attributeType="XML"
                                type="rotate"
                                from="0 512 512"
                                to="360 512 512"
                                dur="1.1s"
                                repeatCount="indefinite"/>
                            <!-- Bubble 1 (orbits around center 512,512) -->
                            <circle cx="412" cy="412" r="100" fill="#4a4a4a"/>
                            <path d="M 357 485 L 337 525 L 377 505 Z" fill="#4a4a4a"/>
                            
                            <!-- Bubble 2 (orbits around center 512,512) -->
                            <circle cx="612" cy="612" r="100" fill="#6a6a6a"/>
                            <path d="M 667 539 L 687 499 L 647 519 Z" fill="#6a6a6a"/>
                        </g>
                    </svg>
                </div>
            </div>

            <div class="preview-box">
                <h2>Medium Speed (2.5s) - White Background</h2>
                <div style="background: #FFFFFF; padding: 20px; display: inline-block;">
                    <svg width="200" height="200" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg">
                        <g>
                            <animateTransform
                                attributeName="transform"
                                attributeType="XML"
                                type="rotate"
                                from="0 512 512"
                                to="360 512 512"
                                dur="2.5s"
                                repeatCount="indefinite"/>
                            <!-- Bubble 1 (orbits around center 512,512) -->
                            <circle cx="412" cy="412" r="100" fill="#4a4a4a"/>
                            <path d="M 357 485 L 337 525 L 377 505 Z" fill="#4a4a4a"/>
                            
                            <!-- Bubble 2 (orbits around center 512,512) -->
                            <circle cx="612" cy="612" r="100" fill="#6a6a6a"/>
                            <path d="M 667 539 L 687 499 L 647 519 Z" fill="#6a6a6a"/>
                        </g>
                    </svg>
                </div>
            </div>
        </div>

        <div class="controls">
            <h3 style="font-family: 'Quicksand', sans-serif; font-weight: 500; text-transform: uppercase; font-size: 14px; margin-bottom: 15px;">Download Spinner SVGs</h3>
            <button onclick="downloadSpinner('fast', false)">Download Fast (Transparent)</button>
            <button onclick="downloadSpinner('medium', false)">Download Medium (Transparent)</button>
            <button onclick="downloadSpinner('slow', false)">Download Slow (Transparent)</button>
            
            <h3 style="font-family: 'Quicksand', sans-serif; font-weight: 500; text-transform: uppercase; font-size: 14px; margin: 20px 0 15px;">Download with Background</h3>
            <button onclick="downloadSpinner('fast', true)">Download Fast (Dark BG)</button>
            <button onclick="downloadSpinner('medium', true)">Download Medium (Dark BG)</button>
            <button onclick="downloadSpinner('slow', true)">Download Slow (Dark BG)</button>

            <h3 style="font-family: 'Quicksand', sans-serif; font-weight: 500; text-transform: uppercase; font-size: 14px; margin: 20px 0 15px;">Download PNG (Various Sizes)</h3>
            <button onclick="downloadPNG(128, 'fast')">128x128 PNG (Fast)</button>
            <button onclick="downloadPNG(256, 'medium')">256x256 PNG (Medium)</button>
            <button onclick="downloadPNG(512, 'medium')">512x512 PNG (Medium)</button>
        </div>

        <div class="reference">
            <strong>DESIGN REFERENCE:</strong> Per 5.1 (Cleaner Theme monochrome specification) and 1.3 (enterprise-grade visual standards). Thinking spinner features chat bubbles orbiting around the CENTER POINT (512, 512) between them. Bubbles positioned at (412, 412) and (612, 612) rotate around axis at (512, 512), creating circular orbital motion where bubbles swap positions. Bubble radius: 100px. No background circle, no central "S", pure orbital rotation only. Three speed options: Fast (1.1s), Medium (2.5s), Slow (4s). Transparent background allows flexible integration on any surface. Uses SVG animateTransform for precise rotation around center point per E=mc² principles of physics.
        </div>
    </div>

    <script>
        function getSpeedDuration(speed) {
            switch(speed) {
                case 'fast': return '1.1s';
                case 'medium': return '2.5s';
                case 'slow': return '4s';
                default: return '2.5s';
            }
        }

        function downloadSpinner(speed, withBackground) {
            const duration = getSpeedDuration(speed);
            const bg = withBackground ? '<circle cx="512" cy="512" r="486.4" fill="#1a1a1a"/>\n    ' : '';
            
            const svg = `<?xml version="1.0" encoding="UTF-8"?>
<svg width="1024" height="1024" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg">
    ${bg}<!-- Rotating chat bubbles (thinking spinner - ${speed} speed) -->
    <g>
        <animateTransform
            attributeName="transform"
            attributeType="XML"
            type="rotate"
            from="0 512 512"
            to="360 512 512"
            dur="${duration}"
            repeatCount="indefinite"/>
        
        <!-- Bubble 1 (orbits around center 512,512) -->
        <circle cx="412" cy="412" r="100" fill="#4a4a4a"/>
        <path d="M 357 485 L 337 525 L 377 505 Z" fill="#4a4a4a"/>
        
        <!-- Bubble 2 (orbits around center 512,512) -->
        <circle cx="612" cy="612" r="100" fill="#6a6a6a"/>
        <path d="M 667 539 L 687 499 L 647 519 Z" fill="#6a6a6a"/>
    </g>
</svg>`;
            
            const blob = new Blob([svg], { type: 'image/svg+xml' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            const bgSuffix = withBackground ? '-dark-bg' : '-transparent';
            a.download = `sovereign-spinner-${speed}${bgSuffix}.svg`;
            document.body.appendChild(a);
            a.click();
            setTimeout(() => {
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
            }, 100);
        }

        function drawSpinner(canvas, speed) {
            const ctx = canvas.getContext('2d');
            const size = canvas.width;
            const center = size / 2;
            const scale = size / 1024;

            ctx.clearRect(0, 0, size, size);

            // Calculate rotation based on timestamp for animation
            const timestamp = Date.now();
            const speedMs = speed === 'fast' ? 1100 : speed === 'slow' ? 4000 : 2500;
            const rotation = (timestamp % speedMs) / speedMs * Math.PI * 2;

            ctx.save();
            ctx.translate(center, center);
            ctx.rotate(rotation);
            ctx.translate(-center, -center);

            // Bubble 1 - reduced orbital distance (100px from center at 45°)
            const bubble1X = center - (100 * scale * Math.SQRT1_2);
            const bubble1Y = center - (100 * scale * Math.SQRT1_2);
            const bubbleRadius = 100 * scale;
            
            ctx.beginPath();
            ctx.arc(bubble1X, bubble1Y, bubbleRadius, 0, Math.PI * 2);
            ctx.fillStyle = '#4a4a4a';
            ctx.fill();
            
            // Bubble tail 1 (proportionally reduced)
            ctx.beginPath();
            ctx.moveTo(bubble1X - (55 * scale), bubble1Y + (73 * scale));
            ctx.lineTo(bubble1X - (75 * scale), bubble1Y + (113 * scale));
            ctx.lineTo(bubble1X - (35 * scale), bubble1Y + (93 * scale));
            ctx.closePath();
            ctx.fill();

            // Bubble 2 - reduced orbital distance (100px from center at 45°)
            const bubble2X = center + (100 * scale * Math.SQRT1_2);
            const bubble2Y = center + (100 * scale * Math.SQRT1_2);
            
            ctx.beginPath();
            ctx.arc(bubble2X, bubble2Y, bubbleRadius, 0, Math.PI * 2);
            ctx.fillStyle = '#6a6a6a';
            ctx.fill();
            
            // Bubble tail 2 (proportionally reduced)
            ctx.beginPath();
            ctx.moveTo(bubble2X + (55 * scale), bubble2Y - (73 * scale));
            ctx.lineTo(bubble2X + (75 * scale), bubble2Y - (113 * scale));
            ctx.lineTo(bubble2X + (35 * scale), bubble2Y - (93 * scale));
            ctx.closePath();
            ctx.fill();

            ctx.restore();

            // Continue animation
            requestAnimationFrame(() => drawSpinner(canvas, speed));
        }

        function downloadPNG(size, speed) {
            const canvas = document.createElement('canvas');
            canvas.width = size;
            canvas.height = size;
            
            // Draw single frame at 0 rotation
            const ctx = canvas.getContext('2d');
            const center = size / 2;
            const scale = size / 1024;

            ctx.clearRect(0, 0, size, size);

            // Bubble 1 - reduced size (100px radius, closer orbital distance)
            const bubble1X = center - (100 * scale * Math.SQRT1_2);
            const bubble1Y = center - (100 * scale * Math.SQRT1_2);
            const bubbleRadius = 100 * scale;
            
            ctx.beginPath();
            ctx.arc(bubble1X, bubble1Y, bubbleRadius, 0, Math.PI * 2);
            ctx.fillStyle = '#4a4a4a';
            ctx.fill();
            
            // Bubble tail 1 (proportionally reduced)
            ctx.beginPath();
            ctx.moveTo(bubble1X - (55 * scale), bubble1Y + (73 * scale));
            ctx.lineTo(bubble1X - (75 * scale), bubble1Y + (113 * scale));
            ctx.lineTo(bubble1X - (35 * scale), bubble1Y + (93 * scale));
            ctx.closePath();
            ctx.fill();

            // Bubble 2 - reduced size (100px radius, closer orbital distance)
            const bubble2X = center + (100 * scale * Math.SQRT1_2);
            const bubble2Y = center + (100 * scale * Math.SQRT1_2);
            
            ctx.beginPath();
            ctx.arc(bubble2X, bubble2Y, bubbleRadius, 0, Math.PI * 2);
            ctx.fillStyle = '#6a6a6a';
            ctx.fill();
            
            // Bubble tail 2 (proportionally reduced)
            ctx.beginPath();
            ctx.moveTo(bubble2X + (55 * scale), bubble2Y - (73 * scale));
            ctx.lineTo(bubble2X + (75 * scale), bubble2Y - (113 * scale));
            ctx.lineTo(bubble2X + (35 * scale), bubble2Y - (93 * scale));
            ctx.closePath();
            ctx.fill();

            canvas.toBlob(function(blob) {
                if (!blob) {
                    alert('Error creating image. Please try again.');
                    return;
                }
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `sovereign-spinner-${size}x${size}-${speed}.png`;
                document.body.appendChild(a);
                a.click();
                setTimeout(() => {
                    document.body.removeChild(a);
                    URL.revokeObjectURL(url);
                }, 100);
            }, 'image/png');
        }
    </script>
</body>
</html>
